# Environment Variables Template for Backend
# Copy this file to .env.local and customize for your local development
# ⚠️ NEVER commit .env.local to Git - it contains secrets!

# Database - Use PostgreSQL for development
DATABASE_URI=postgresql://genascope:genascope@db:5432/genascope

# Authentication - Generate with: openssl rand -base64 32
SECRET_KEY=your-super-secret-jwt-key-here-generate-with-openssl-rand
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# CORS Settings
CORS_ORIGINS=["http://localhost:3000","http://localhost:4321"]

# External APIs
LAB_API_KEY=your-lab-api-key-here
LAB_API_URL=https://api.lab.example.com

# Frontend
FRONTEND_URL=http://localhost:4321

# Storage Configuration
STORAGE_PROVIDER=s3  # Options: local, minio, s3, gcp
STORAGE_BUCKET=your-s3-bucket-name
STORAGE_BASE_PATH=/tmp/genascope_storage

# MinIO Configuration (when STORAGE_PROVIDER=minio)
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_SECURE=false

# AWS S3 Configuration - Role-based Authentication (Preferred)
AWS_ROLE_ARN=arn:aws:iam::YOUR-ACCOUNT:role/YOUR-ROLE-NAME
AWS_ROLE_SESSION_NAME=genascope-backend-session
AWS_ROLE_EXTERNAL_ID=
AWS_REGION=us-west-2
AWS_S3_BUCKET=your-s3-bucket-name

# AWS S3 Configuration - Initial Credentials for Role Assumption
# ⚠️ Replace with your actual AWS credentials
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_KEY

# SMTP Configuration
SMTP_SERVER=maildev  # For local development
SMTP_PORT=1025       # For local development
EMAIL_ENABLED=true

# AI Configuration
# ⚠️ Replace with your actual OpenAI API key
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=500

# LangChain (optional for tracing)
LANGCHAIN_API_KEY=your-langchain-key-here
LANGCHAIN_PROJECT=genascope-chat
LANGCHAIN_TRACING_V2=false

# Vector Embeddings (pgvector)
PGVECTOR_EXTENSION_ENABLED=true
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
SIMILARITY_THRESHOLD=0.7

# Chat Configuration
MAX_CONVERSATION_TURNS=20
SESSION_TIMEOUT_HOURS=24
MAX_MESSAGE_LENGTH=2000

# Security
ANONYMIZE_BEFORE_AI=true
MASK_PII=true
ENABLE_AUDIT_LOGGING=true

# Caching
REDIS_URL=redis://localhost:6379/0
ENABLE_RESPONSE_CACHING=true
RESPONSE_CACHE_TTL=3600

# External Tools
ENABLE_MOCK_CALCULATORS=true
TYRER_CUZICK_API_URL=https://api.tcrisk.com
